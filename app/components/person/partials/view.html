<section id="person-grid" class="inner" data-ng-controller="PersonController">
  <form id="person" name="person" class="row" >
    <article data-ui-view>
      <div class="panel panel-collapsible panel-default">
        <div class="panel-heading">
          <h3 data-toggle="collapse" data-target="#person-body" aria-label="Expand/Collapse the main Person content" id="person-heading">Person details</h3>
        </div>
        <div id="person-body" class="panel-body form-horizontal in" aria-labelledby="person-heading">

          <div class="form-group form-group-sm">
            <div class="span-4">
            <label id="personIdLabel" for="personId" class="control-label" aria-label="Person ID">Person ID</label>
              <input type="text" class="form-control" id="personId" name="personId" aria-labelledby="personIdLabel" disabled="true"
                     data-ng-model="context.id" data-kint-validate />
            </div>

            <div class="span-4">
            <label id="orcIdLabel" for="orcId" class="control-label" aria-label="ORCID">ORCID</label>
              <input type="text" class="form-control" id="orcId" name="orcId" aria-labelledby="orcIdLabel"
                     data-ng-model="context.orcId" data-kint-validate />
            </div>
          </div>

          <div class="form-group form-group-sm">
            <div class="span-4" data-ng-class="{'has-error': (person.title.$dirty && person.title.$invalid), 'has-success': (person.title.$dirty && person.title.$valid)}">
              <label id="titleLabel" for="title" class="control-label" aria-label="Title">Title</label>
              <kint-refdata-lookup name="title" id="title" data-object="context" data-property="title" class="form-control input-sm" >
            </div>

            <div class="span-4">
            <label id="firstNameLabel" for="firstName" class="control-label" aria-label="Person First Name" >First Name(s)*</label>
              <input type="text" class="form-control" id="firstName" name="firstName" placeholder="First name(s)" aria-labelledby="firstNameLabel"
                     data-ng-model="context.firstName" data-ng-model-options="{ updateOn: 'default', debounce: { default: 650} }"
                     data-kint-ui-input-feedback data-kint-validate required />
            </div>

            <div class="span-4">
              <label id="surnameLabel" for="surname" class="control-label" aria-label="Person Surname" >Surname*</label>
              <input type="text" class="form-control" id="surname" name="surname" placeholder="Surname" aria-labelledby="surnameLabel"
                     data-ng-model="context.surname" data-ng-model-options="{ updateOn: 'default', debounce: { default: 650} }"
                     data-kint-ui-input-feedback data-kint-validate required />
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-collapsible panel-default">
        <div class="panel-heading">
          <h3 data-toggle="collapse" data-target="#contactDetailsPanel" aria-label="Expand/Collapse the main contact details content" id="contactDetailsHeading">Contact details</h3>
        </div>
        <div id="contactDetailsPanel" class="panel-body form-horizontal in" aria-labelledby="contactDetailsHeading" >
          <form id="addContactDetails" name="addContactDetails" class="table-responsive" >
            <ng-include src="'components/person/partials/_table_contact_details.html'" ></ng-include>
          </form>
        </div>
      </div>
    </article>

    <div class="form-group pull-right">
      <button type="button" class="btn btn-success" data-ng-click="saveChanges()" data-ng-disabled="!person.$dirty || person.$invalid" >Save</button>
      <button type="button" class="btn btn-link" data-ng-click="cancelChanges()" data-ng-disabled="!person.$dirty" >Cancel</button>
    </div>
  </form>
</section>
